#############################################################################################
### Build Applications 
#############################################################################################

IF(BUILD_NAVIERSTOKESAPPS)
  set(NS_FOLDER NavierStokes/)
  # Steady NavierStokes
  ADD_SUBDIRECTORY(${NS_FOLDER}/SteadyNavierStokesParallel)

  # Time-dependent BE NavierStokes
  ADD_SUBDIRECTORY(${NS_FOLDER}/BackwardEulerNavierStokesParallel/)
 
  # Time-dependent Generalized-alpha NavierStokes
  ADD_SUBDIRECTORY(${NS_FOLDER}/TaylorGreenVortexFlowGeneralisedalpha/)
 
  # Steady Stokes
  ADD_SUBDIRECTORY(${NS_FOLDER}/SteadyStokes/)

  # Steady Navier Stokes steady
  ADD_SUBDIRECTORY(${NS_FOLDER}/NavierStokesTemp_AMR/)
  unset(NS_FOLDER)
ENDIF(BUILD_NAVIERSTOKESAPPS)


IF(BUILD_FSIAPPS)
  set(FSI_FOLDER FSI/)
# FSI Time Dependent Benchmarks
  ADD_SUBDIRECTORY(${FSI_FOLDER}/FSITimeDependentBenchmarks/)

# FSI SteadyState Benchmarks
  ADD_SUBDIRECTORY(${FSI_FOLDER}/FSISteadyStateBenchmarks/)

# FSI SteadyState Benchmark Turek3
  ADD_SUBDIRECTORY(${FSI_FOLDER}/FSI_TUREK_3/)

# FSI SteadyState in porous media
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsi_porous/)

# FSI SteadyState in porous media
  ADD_SUBDIRECTORY(${FSI_FOLDER}/frac/)
  
  # FSI SteadyState in porous media //NS - Ex6
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsiOPT/testNS)
  
   # FSI SteadyState in porous media //NS - Opt
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsiOPT/testNS_Opt)
  
  # FSI SteadyState in porous media //NS - StAdCtrl
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsiOPT/testOPT)
  
  # FSI SteadyState in porous media //Stokes - Distributed Control Opt _StAd
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsiOPT/Stokes_dist_adj)
  
  # FSI SteadyState in porous media //NS - Opt _lift
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsiOPT/testNS_lift)
  
  # FSI SteadyState in porous media //Poisson_Lifting_restriction_opt_Saikanths
  ADD_SUBDIRECTORY(${FSI_FOLDER}/fsiOPT/lift_restr)
  
#   # FSI SteadyState in porous media
#   ADD_SUBDIRECTORY(${FSI_FOLDER}/fracfsitest/)
  
  unset(FSI_FOLDER)
  
ENDIF(BUILD_FSIAPPS)


IF(BUILD_OPTCONTROLAPPS)
set(OPTCONTROL_FOLDER OptimalControl/)
# MHD Optimal Control
  set(OPT_APPLICATION mhdopt)
  ADD_SUBDIRECTORY(${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/)
  FILE(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/)
  FILE(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/output/)
  FILE(COPY ${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/ DESTINATION ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/)

# Temperature Optimal Control
  set(OPT_APPLICATION tempopt)
  ADD_SUBDIRECTORY(${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/)
  FILE(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/)
  FILE(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/output/)
  FILE(COPY ${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/ DESTINATION ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/)

# FE test
  set(OPT_APPLICATION fe_test)
  ADD_SUBDIRECTORY(${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/)
  FILE(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/)
  FILE(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/output/)
  FILE(COPY ${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/ DESTINATION ${PROJECT_BINARY_DIR}/applications/${OPTCONTROL_FOLDER}/${OPT_APPLICATION}/input/)
  unset(OPT_APPLICATION)  
ENDIF(BUILD_OPTCONTROLAPPS)

IF(BUILD_POISSON)
  ADD_SUBDIRECTORY(Poisson/)
ENDIF(BUILD_POISSON)

IF(BUILD_POISSON_AMR)
  ADD_SUBDIRECTORY(Poisson_AMR/)
ENDIF(BUILD_POISSON_AMR)

IF(BUILD_TUTORIAL)
  ADD_SUBDIRECTORY(tutorial/Ex1/)
  ADD_SUBDIRECTORY(tutorial/Ex2/)
  ADD_SUBDIRECTORY(tutorial/Ex3/)
  ADD_SUBDIRECTORY(tutorial/Ex4/)
  ADD_SUBDIRECTORY(tutorial/Ex5/)
  ADD_SUBDIRECTORY(tutorial/Ex6/)
  ADD_SUBDIRECTORY(tutorial/Ex7/)
  ADD_SUBDIRECTORY(tutorial/Ex8/)
  ADD_SUBDIRECTORY(tutorial/Ex9/)
ENDIF(BUILD_TUTORIAL)

IF(BUILD_WILLMORE)
  ADD_SUBDIRECTORY(Willmore/)
ENDIF(BUILD_WILLMORE)

IF(BUILD_WILLMOREGEN)
  ADD_SUBDIRECTORY(Willmore_gen/)
ENDIF(BUILD_WILLMOREGEN)

